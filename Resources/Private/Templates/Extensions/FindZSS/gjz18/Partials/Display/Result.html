{namespace s=Subugoe\Find\ViewHelpers}
{namespace g=Gjz18\TmplGjz\ViewHelpers}

<f:alias map="{
	fieldMakContent:'{g:MakValueForKey(array:document.fields.d002_s0, key:0)}',
	TkyTrue:'Tky',
	Tsx7True:'Tsx7',
	Tsx7eTrue:'Tsx7e',
	ZsTrue:'zs',
	ArtTrue:'art'
}">


<li class="liResults" id="c{uid}-result-{document.id}">
	<article>
		<h1>
			<f:link.action
				action="detail"
				arguments="{id:document.id}"
				section="{settings.jumpToID}"
				noCacheHash="1"
				class="internal no-change"
				onclick="{f:if(
					condition:'{settings.paging.detailPagePaging == 1}',
					then:'return tx_find.detailViewWithPaging(this);'
				)}"
				target="_parent"
				>
					<f:if condition="{s:data.valueForKey(array:document.fields, key:'d021Gsa')}">
						<f:then>
							<g:strreplace search="@" replace="">
								<f:render
								partial="Display/Field/Inline"
								arguments="{
									results:results,
									document:document,
									field:'d021Gsa',
									separator:', '
								}"/>
							</g:strreplace>
						</f:then>
						<f:else>
							<f:if condition="{fieldMakContent}=={Tsx7True}">
								<f:then>
									<g:strreplace search="@" replace="">
										Normdatensatz (Gattung):&nbsp;
										<f:render
											partial="Display/Field/Inline"
											arguments="{
												results:results,
												document:document,
												field:'d041Asa',
												separator:', '
										}"/>
									</g:strreplace>
								</f:then>
								<f:else>
									<f:if condition="{fieldMakContent}=={Tsx7eTrue}">
										<f:then>
											<g:strreplace search="@" replace="">
												Normdatensatz (Gattung; IdZ u. IdRZ):&nbsp;
												<f:render
													partial="Display/Field/Inline"
													arguments="{
														results:results,
														document:document,
														field:'d041Asa',
														separator:', '
												}"/>
											</g:strreplace>
										</f:then>
										<f:else>
											<f:if condition="{fieldMakContent}=={TkyTrue}">
												<f:then>
													<g:strreplace search="@" replace="">
														Systemstelle:&nbsp;
														<f:render
															partial="Display/Field/Inline"
															arguments="{
																results:results,
																document:document,
																field:'d045Asa',
																separator:', '
														}"/>
													</g:strreplace>
												</f:then>
												<f:else>
													<f:if condition="{fieldMakContent}=={ZsTrue}">
														<f:then>
															<g:strreplace search="@" replace="">
																Zeitschrift:&nbsp;
																<f:render partial="Display/Field/Inline" arguments="{results:results, document:document, field:'d021Asa', separator:', '}"/>
																<f:if condition="{document.d021Asd}">:<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'d021Asd'}"/></f:if>
																<f:if condition="{document.d021Ash}">/<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'d021Ash'}"/></f:if>
																<f:if condition="{document.d021Asf}">=<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'d021Asf'}"/></f:if>
															</g:strreplace>
														</f:then>
														<f:else>
															<f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.title)}">
																<f:then>
																	<g:strreplace search="@" replace="">
																		<f:render
																			partial="Display/Field/Inline"
																			arguments="{
																				results:results,
																				document:document,
																				field:settings.standardFields.title,
																				separator:', '
																		}"/>
																	</g:strreplace>
																</f:then>
																<f:else>
																	[ohne Titel]
																</f:else>
															</f:if>
														</f:else>
													</f:if>
												</f:else>
											</f:if>
										</f:else>
									</f:if>
								</f:else>
							</f:if>
						</f:else>
					</f:if>
			</f:link.action>
		</h1>
		<g:strreplace search="&nbsp;(-gen-f-)" replace="">
			<f:if condition="{fieldMakContent}=={ArtTrue}">
				<f:then>
					<f:if condition="{document.pd_PersonRezWerk}">
						<f:then>
							<p class="pResults">
								<g:strreplace search=" " replace="&nbsp;">
									<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd_PersonRezWerk', separator:';&nbsp;'}"/>
								</g:strreplace>
							</p>
						</f:then>
						<f:else>
							<f:if condition="{document.pd029Gsa}">
								<f:then>
									<p class="pResults">
										<g:strreplace search=" " replace="&nbsp;">
											<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Gsa', separator:';&nbsp;'}"/>
										</g:strreplace>
									</p>
								</f:then>
								<f:else>
									<f:if condition="{document.pd029Ksa}">
										<f:then>
											<p class="pResults">
												<g:strreplace search=" " replace="&nbsp;">
													<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Ksa', separator:';&nbsp;'}"/>
												</g:strreplace>
											</p>
										</f:then>
										<f:else>
											<f:if condition="{document.pd_PersonArtikel}">
												<f:then>
													<p class="pResults">
														<g:strreplace search=" " replace="&nbsp;">
															<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd_PersonArtikel', separator:';&nbsp;'}"/>
														</g:strreplace>
													</p>
												</f:then>
												<f:else>
													<f:if condition="{document.pd029Fsa}">
														<f:then>
															<p class="pResults">
																<g:strreplace search=" " replace="&nbsp;">
																	<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Fsa', separator:';&nbsp;'}"/>
																</g:strreplace>
															</p>
														</f:then>
													</f:if>
												</f:else>
											</f:if>
										</f:else>
									</f:if>
								</f:else>
							</f:if>
						</f:else>
					</f:if>
				</f:then>
				<f:else>
					<f:if condition="{fieldMakContent}=={ZsTrue}">
						<f:then>
							<f:if condition="{document.pd_PersonArtikel}">
								<f:then>
									<p class="pResults">
										<f:alias map="{
											singleNameZsClean:'{g:ZsPersonName(array:document.pd_PersonArtikel)}'
										}">
											<f:for each="{singleNameZsClean}" as="singleNameZsCleanValue" iteration="singleNameZsCleanIterator"><g:strreplace search=" " replace="&nbsp;">{singleNameZsCleanValue}</g:strreplace>{f:if(condition:"{singleNameZsCleanIterator.isLast}==0", then:";&nbsp;&nbsp;")}</f:for>
										</f:alias>
									</p>
								</f:then>
								<f:else>
									<f:if condition="{document.pd029Gsa}">
										<f:then>
											<p class="pResults">
												<g:strreplace search=" " replace="&nbsp;">
													<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Gsa', separator:';&nbsp;&nbsp;'}"/>
												</g:strreplace>
											</p>
										</f:then>
									</f:if>
								</f:else>
							</f:if>
						</f:then>
						<f:else>
							<f:if condition="{fieldMakContent}=={TkyTrue}">
								<f:then>
									<p class="pResults">
										<g:strreplace search="@" replace="">
											<f:translate key="LLL:{settings.languageRootPath}locallang-facets-classificationpath.xml:facet.Systemstellen.{s:data.valueForKey(array:document.fields.d003_s0, key:0)}"/>
										</g:strreplace>
									</p>
								</f:then>
							</f:if>
						</f:else>
					</f:if>
				</f:else>
			</f:if>
		</g:strreplace>
		<f:if condition="{s:logic.or(conditions:'{0:document.i011_, 1:document.i011_sa, 2:document.i011_sb}')}">
			<p class="pResults">
				<span style="color:#999999;">
					<g:strreplace search="@" replace="">
						<f:if condition="{s:data.valueForKey(array:document.fields, key:'d039Bs9')}">
							<f:then>
								<f:translate key="LLL:{settings.languageRootPath}locallang-facets.xml:facet.Zeitschrift.{s:data.valueForKey(array:document.fields.d039Bs9, key:0)}"/>
								<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asj')}">
									&nbsp;({s:data.valueForKey(array:document.fields.d031Asj, key:0)}<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asd')}">, Bd.&nbsp;{s:data.valueForKey(array:document.fields.d031Asd, key:0)}</f:if><f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Ash')}">, S.&nbsp;{s:data.valueForKey(array:document.fields.d031Ash, key:0)}</f:if>)
								</f:if>
							</f:then>
							<f:else>
										<f:if condition="{0:document.i011_sb}">
											<f:then>
												<f:if condition="{g:ZssJahr(integer:document.i011_sa)}=={g:ZssJahr(integer:document.i011_sb)}">
													<f:then>
														({g:ZssJahr(integer:document.i011_sa)}<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asd')}">, Bd.&nbsp;{s:data.valueForKey(array:document.fields.d031Asd, key:0)}</f:if><f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Ash')}">, S.&nbsp;{s:data.valueForKey(array:document.fields.d031Ash, key:0)}</f:if>)
													</f:then>
													<f:else>
														({g:ZssJahr(integer:document.i011_sa)}-{g:ZssJahr(integer:document.i011_sb)}<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asd')}">, Bd.&nbsp;{s:data.valueForKey(array:document.fields.d031Asd, key:0)}</f:if><f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Ash')}">, S.&nbsp;{s:data.valueForKey(array:document.fields.d031Ash, key:0)}</f:if>)
													</f:else>
												</f:if>
											</f:then>
											<f:else>
												<f:if condition="{document.d011_sa}">
													({g:ZssJahr(integer:document.i011_sa)}<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asd')}">, Bd.&nbsp;{s:data.valueForKey(array:document.fields.d031Asd, key:0)}</f:if><f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Ash')}">, S.&nbsp;{s:data.valueForKey(array:document.fields.d031Ash, key:0)}</f:if>)
												</f:if>
											</f:else>
										</f:if>
							</f:else>
						</f:if>
					</g:strreplace>
				</span>
			</p>
		</f:if>
	</article>
</li>

</f:alias>
