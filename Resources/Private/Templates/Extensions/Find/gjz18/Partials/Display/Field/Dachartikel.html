{namespace s=Subugoe\Find\ViewHelpers}
{namespace g=Gjz18\TmplGjz\ViewHelpers}

<f:alias map="{
	counter4241:'{f:count(subject:document.fields.d039Bs9)}',
	counter4241_subA:'{f:count(subject:document.fields.d039Bsa)}'
}">
	<f:if condition="{counter4241} > 1">
		<f:if condition="{counter4241_subA} == 1">
			<f:then>
				<f:alias map="{
					linkContent:'{s:data.valueForKey(array:document.fields.d039Bs9, key:1)}',
					queryField:'d003_s0',
					idPrefix:'oai:gbv.de:proj-gjz:ppn:'
				}">
					<f:link.action
						action="detail"
						controller="Search"
						arguments="{
							q:'{default:\'{queryField}:\"{linkContent}\"\'}',
							id:'{idPrefix}{linkContent}'
						}"
						class="internal"
					>
						[o.T.]
					</f:link.action>
				</f:alias>
			</f:then>
      <f:else>
        <f:if condition="{counter4241_subA} == 2">
          <f:then>
            <f:alias map="{
              fieldContent:'{s:valueForKey(array:document.fields.d039Bsa, key:1)}',
              linkContent:'{s:valueForKey(array:document.fields.d039Bs9, key:1)}',
              queryField:'d003_s0',
              idPrefix:'oai:gbv.de:proj-gjz:ppn:'
            }">
              <f:link.action
                action="detail"
                controller="Search"
                arguments="{
                  q:'{default:\'{queryField}:\"{linkContent}\"\'}',
                  id:'{idPrefix}{linkContent}'
                }"
                class="internal"
              >
                {fieldContent}
              </f:link.action>
            </f:alias>
          </f:then>
          <f:else>
            <f:if condition="{counter4241_subA} == 3">
              <f:then>
                <f:alias map="{
                  fieldContent:'{s:data.valueForKey(array:document.fields.d039Bsa, key:1)}',
                  linkContent:'{s:data.valueForKey(array:document.fields.d039Bs9, key:1)}',
                  queryField:'d003_s0',
                  idPrefix:'oai:gbv.de:proj-gjz:ppn:'
                }">
                  <f:link.action
                    action="detail"
                    controller="Search"
                    arguments="{
                      q:'{default:\'{queryField}:\"{linkContent}\"\'}',
                      id:'{idPrefix}{linkContent}'
                    }"
                    class="internal"
                  >
                    {fieldContent}
                  </f:link.action>
                </f:alias>
              </f:then>
              <f:else>
                <f:if condition="{counter4241_subA} == 4">
                  <f:then>
                    <f:alias map="{
                      fieldContent1:'{s:data.valueForKey(array:document.fields.d039Bsa, key:1)}',
                      fieldContent2:'{s:data.valueForKey(array:document.fields.d039Bsa, key:2)}',
                      linkContent:'{s:data.valueForKey(array:document.fields.d039Bs9, key:1)}',
                      queryField:'d003_s0',
                      idPrefix:'oai:gbv.de:proj-gjz:ppn:'
                    }">
                      <f:link.action
                        action="detail"
                        controller="Search"
                        arguments="{
                          q:'{default:\'{queryField}:\"{linkContent}\"\'}',
                          id:'{idPrefix}{linkContent}'
                        }"
                        class="internal"
                      >
                        {fieldContent1}&nbsp;{fieldContent2}
                      </f:link.action>
                    </f:alias>
                  </f:then>
                  <f:else>
                    <f:if condition="{counter4241_subA} == 5">
                      <f:then>
                        <f:alias map="{
                          fieldContent1:'{s:data.valueForKey(array:document.fields.d039Bsa, key:1)}',
                          fieldContent2:'{s:data.valueForKey(array:document.fields.d039Bsa, key:2)}',
                          fieldContent2:'{s:data.valueForKey(array:document.fields.d039Bsa, key:3)}',
                          linkContent:'{s:data.valueForKey(array:document.fields.d039Bs9, key:1)}',
                          queryField:'d003_s0',
                          idPrefix:'oai:gbv.de:proj-gjz:ppn:'
                        }">
                          <f:link.action
                            action="detail"
                            controller="Search"
                            arguments="{
                              q:'{default:\'{queryField}:\"{linkContent}\"\'}',
                              id:'{idPrefix}{linkContent}'
                            }"
                            class="internal"
                          >
                            {fieldContent1}&nbsp;{fieldContent2}&nbsp;{fieldContent3}
                          </f:link.action>
                        </f:alias>
                      </f:then>
                      <f:else>
                        <f:if condition="{counter4241_subA} == 6">
                          <f:then>
                            <f:alias map="{
                              fieldContent1:'{s:data.valueForKey(array:document.fields.d039Bsa, key:1)}',
                              fieldContent2:'{s:data.valueForKey(array:document.fields.d039Bsa, key:2)}',
                              fieldContent2:'{s:data.valueForKey(array:document.fields.d039Bsa, key:3)}',
                              fieldContent2:'{s:data.valueForKey(array:document.fields.d039Bsa, key:4)}',
                              linkContent:'{s:data.valueForKey(array:document.fields.d039Bs9, key:1)}',
                              queryField:'d003_s0',
                              idPrefix:'oai:gbv.de:proj-gjz:ppn:'
                            }">
                              <f:link.action
                                action="detail"
                                controller="Search"
                                arguments="{
                                  q:'{default:\'{queryField}:\"{linkContent}\"\'}',
                                  id:'{idPrefix}{linkContent}'
                                }"
                                class="internal"
                              >
                                {fieldContent1}&nbsp;{fieldContent2}&nbsp;{fieldContent3}&nbsp;{fieldContent4}
                              </f:link.action>
                            </f:alias>
                          </f:then>
                        </f:if>
                      </f:else>
                    </f:if>
                  </f:else>
                </f:if>
              </f:else>
            </f:if>
          </f:else>
        </f:if>
      </f:else>
		</f:if>
	</f:if>
</f:alias>