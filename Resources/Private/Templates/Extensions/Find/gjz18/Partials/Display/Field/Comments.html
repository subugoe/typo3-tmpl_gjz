{namespace s=Subugoe\Find\ViewHelpers}
{namespace g=Gjz18\TmplGjz\ViewHelpers}

<f:format.raw>
<f:if condition="{s:data.isArray(subject:'{s:data.valueForKey(array:document.fields, key:field)}')}">
	<f:then>
		{groupPrefix->f:format.raw()}
		<f:for each="{s:data.valueForKey(array:document.fields, key:field)}" as="value" iteration="iterator">
			{groupItemPrefix->f:format.raw()}{fieldPrefix->f:format.raw()}
				<f:alias map="{
					fieldName:'{f:translate(key:\"LLL:{settings.languageRootPath}locallang-fields.xml:field.{field}\", default:field)}',
					fieldContent:'{s:data.valueForKey(array:document.fields, key:field)}'
				}">
					<f:if condition="{s:data.isArray(subject:fieldContent)}">
						<f:then>
							<f:alias map="{
								i: iterator.index
							}">
								<f:alias map="{
									fieldContentSingle:'{s:data.valueForKey(array:fieldContent, key:i)}'
								}">
									<p class="innerPara">{fieldContentSingle}</p>
								</f:alias>
							</f:alias>
						</f:then>
						<f:else>
							<f:alias map="{
								i: iterator.index
							}">
								<f:alias map="{
									fieldContentSingle:'{s:data.valueForKey(array:fieldContent, key:i)}'
								}">
									<p class="innerPara">{fieldContentSingle}</p>
								</f:alias>
							</f:alias>
						</f:else>
					</f:if>
				</f:alias>
			{fieldSuffix->f:format.raw()}{f:if(condition:"{iterator.isLast}==0", then:separator)}{groupItemSuffix->f:format.raw()}
		</f:for>
		{groupSuffix->f:format.raw()}
	</f:then>
	<f:else>
		{fieldPrefix->f:format.raw()}
			<f:alias map="{
				fieldName:'{f:translate(key:\"LLL:{settings.languageRootPath}locallang-fields.xml:field.{field}\", default:field)}',
				fieldContent:'{s:data.valueForKey(array:document.fields, key:field)}'
			}">
					<f:if condition="{s:data.isArray(subject:fieldContent)}">
						<f:then>
							<f:alias map="{
								i: iterator.index
							}">
								<f:alias map="{
									fieldContentSingle:'{s:data.valueForKey(array:fieldContent, key:i)}'
								}">
									<p class="innerPara">{fieldContentSingle}</p>
								</f:alias>
							</f:alias>
						</f:then>
						<f:else>
							<f:alias map="{
								i: iterator.index
							}">
								<f:alias map="{
									fieldContentSingle:'{s:data.valueForKey(array:fieldContent, key:i)}'
								}">
									<p class="innerPara">{fieldContentSingle}</p>
								</f:alias>
							</f:alias>
						</f:else>
					</f:if>
			</f:alias>
		{fieldSuffix->f:format.raw()}
	</f:else>
</f:if>
</f:format.raw>
