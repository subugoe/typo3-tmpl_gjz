{namespace s=Subugoe\Find\ViewHelpers}
{namespace g=Gjz18\TmplGjz\ViewHelpers}

<f:alias map="{
	fieldMakContent:'{g:MakValueForKey(array:document.fields.d002_s0, key:0)}',
	TkyTrue:'Tky',
	Tsx7True:'Tsx7',
	Tsx7eTrue:'Tsx7e',
	ZsTrue:'zs',
	ArtTrue:'art'
}">

	<f:format.raw>
		<li class="liResults" id="c{uid}-result-{document.id}">
			<article>
				<h1>
					<f:link.action
							action="detail"
							arguments="{id:document.id}"
							section="{settings.jumpToID}"
							noCacheHash="1"
							class="internal no-change"
							onclick="{f:if(condition:'{settings.paging.detailPagePaging}',then:'return tx_find.detailViewWithPaging(this);')}"
							target="_parent"
					>
						<f:if condition="{fieldMakContent}=={ArtTrue}">
							<f:then>
							<span class="resultPrefix">
								<f:if condition="{document.pd041Asa.0}">
									[{document.pd041Asa.0}]
								</f:if>
							</span>
							</f:then>
						</f:if>
						<span class="resultTitle">
							<f:if condition="{s:logic.or(conditions:'{0:document.d021Gsa, 1:document.d039Pst}')}">
								<f:then>
									<f:if condition="{document.d021Gsa}">
										<f:then>
											<g:strreplace search="@" replace="">
												<f:render
														partial="Display/Field/Inline"
														arguments="{
													results:results,
													document:document,
													field:'d021Gsa',
													separator:', '
												}"/>
											</g:strreplace>
										</f:then>
										<f:else>
											<f:if condition="{document.d039Pst}">
												<g:strreplace search="@" replace="">
													<f:render
															partial="Display/Field/Inline"
															arguments="{
														results:results,
														document:document,
														field:'d039Pst',
														separator:', '
													}"/>
												</g:strreplace>
											</f:if>
										</f:else>
									</f:if>
								</f:then>
								<f:else>
									<f:if condition="{fieldMakContent}=={Tsx7True}">
										<f:then>
											<g:strreplace search="@" replace="">
												[Normdatensatz (Gattung)]&nbsp;
												<f:render
														partial="Display/Field/Inline"
														arguments="{
														results:results,
														document:document,
														field:'d041Asa',
														separator:', '
												}"/>
											</g:strreplace>
										</f:then>
										<f:else>
											<f:if condition="{fieldMakContent}=={Tsx7eTrue}">
												<f:then>
													<g:strreplace search="@" replace="">
														[Normdatensatz (Gattung; IdZ u. IdRZ)]&nbsp;
														<f:render
																partial="Display/Field/Inline"
																arguments="{
																results:results,
																document:document,
																field:'d041Asa',
																separator:', '
														}"/>
													</g:strreplace>
												</f:then>
												<f:else>
													<f:if condition="{fieldMakContent}=={TkyTrue}">
														<f:then>
															<g:strreplace search="@" replace="">
																[Systemstelle]&nbsp;
																<f:render
																		partial="Display/Field/Inline"
																		arguments="{
																		results:results,
																		document:document,
																		field:'d045Asa',
																		separator:', '
																}"/>
															</g:strreplace>
														</f:then>
														<f:else>
															<f:if condition="{fieldMakContent}=={ZsTrue}">
																<f:then>
																	<g:strreplace search="@" replace="">
																		[Zeitschrift]&nbsp;
																		<f:render partial="Display/Field/Inline" arguments="{results:results, document:document, field:'d021Asa', separator:', '}"/>
																		<f:if condition="{document.d021Asd}">:<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'d021Asd'}"/></f:if>
																		<f:if condition="{document.d021Ash}">/<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'d021Ash'}"/></f:if>
																		<f:if condition="{document.d021Asf}">=<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'d021Asf'}"/></f:if>
																	</g:strreplace>
																</f:then>
																<f:else>
																	<f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.title)}">
																		<f:then>
																			<g:strreplace search="@" replace="">
																				<f:render
																						partial="Display/Field/Inline"
																						arguments="{
																						results:results,
																						document:document,
																						field:settings.standardFields.title,
																						separator:', '
																				}"/>
																			</g:strreplace>
																		</f:then>
																		<f:else>
																			[ohne Titel]
																		</f:else>
																	</f:if>
																</f:else>
															</f:if>
														</f:else>
													</f:if>
												</f:else>
											</f:if>
										</f:else>
									</f:if>
								</f:else>
							</f:if>
						</span>
					</f:link.action>
				</h1>
				<g:strreplace search="&nbsp;(-gen-f-)" replace="">
					<f:if condition="{fieldMakContent}=={ArtTrue}">
						<f:then>
							<f:if condition="{document.pd_PersonRezWerk}">
								<f:then>
									<p class="pResults">
										<g:strreplace search=" " replace="&nbsp;">
											<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd_PersonRezWerk', separator:';&nbsp;'}"/>
											<f:if condition="{document.pd029Gsa}">
												<f:then>
													;&nbsp;
													<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Gsa', separator:' ;&nbsp;'}"/>
												</f:then>
											</f:if>
											<f:if condition="{document.pd029Ksa}">
												<f:then>
													;&nbsp;
													<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Ksa', separator:' ;&nbsp;'}"/>
												</f:then>
											</f:if>
											<f:if condition="{document.pd029K01sa}">
												<f:then>
													;&nbsp;
													<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029K01sa', separator:' ;&nbsp;'}"/>
												</f:then>
											</f:if>
										</g:strreplace>
									</p>
								</f:then>
								<f:else>
									<f:if condition="{s:logic.or(conditions:'{0:document.d029Gsa, 1:document.d029Ksa, 2:document.d029K01sa}')}">
										<f:then>
											<p class="pResults">
												<g:strreplace search=" " replace="&nbsp;">
													<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd_PersonRezWerk', separator:';&nbsp;'}"/>
													<f:if condition="{document.pd029Gsa}">
														<f:then>
															;&nbsp;
															<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Gsa', separator:' ;&nbsp;'}"/>
														</f:then>
													</f:if>
													<f:if condition="{document.pd029Ksa}">
														<f:then>
															;&nbsp;
															<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Ksa', separator:' ;&nbsp;'}"/>
														</f:then>
													</f:if>
													<f:if condition="{document.pd029K01sa}">
														<f:then>
															;&nbsp;
															<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029K01sa', separator:' ;&nbsp;'}"/>
														</f:then>
													</f:if>
												</g:strreplace>
											</p>
										</f:then>
										<f:else>
											<f:if condition="{document.pd_PersonArtikel}">
												<f:then>
													<p class="pResults">
														<g:strreplace search=" " replace="&nbsp;">
															<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd_PersonArtikel', separator:';&nbsp;'}"/>
															<f:if condition="{document.pd029Fsa}">
																<f:then>
																	;&nbsp;
																	<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Fsa', separator:' ;&nbsp;'}"/>
																</f:then>
															</f:if>
														</g:strreplace>
													</p>
												</f:then>
												<f:else>
													<f:if condition="{document.pd029Fsa}">
														<f:then>
															<p class="pResults">
																<g:strreplace search=" " replace="&nbsp;">
																	<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Fsa', separator:' ;&nbsp;'}"/>
																</g:strreplace>
															</p>
														</f:then>
														<f:else>
														</f:else>
													</f:if>
												</f:else>
											</f:if>
										</f:else>
									</f:if>
								</f:else>
							</f:if>
						</f:then>
						<f:else>
							<f:if condition="{fieldMakContent}=={ZsTrue}">
								<f:then>
									<f:if condition="{document.pd_PersonArtikel}">
										<f:then>
											<p class="pResults">
												<f:alias map="{
												singleNameZsClean:'{g:ZsPersonName(array:document.pd_PersonArtikel)}'
											}">
													<f:for each="{singleNameZsClean}" as="singleNameZsCleanValue" iteration="singleNameZsCleanIterator"><g:strreplace search=" " replace="&nbsp;">{singleNameZsCleanValue}</g:strreplace>{f:if(condition:"{singleNameZsCleanIterator.isLast}==0", then:";&nbsp;&nbsp;")}</f:for>
												</f:alias>
											</p>
										</f:then>
										<f:else>
											<f:if condition="{document.pd029Gsa}">
												<f:then>
													<p class="pResults">
														<g:strreplace search=" " replace="&nbsp;">
															<f:render partial="Display/Field/General" arguments="{results:results, document:document, field:'pd029Gsa', separator:';&nbsp;&nbsp;'}"/>
														</g:strreplace>
													</p>
												</f:then>
											</f:if>
										</f:else>
									</f:if>
								</f:then>
								<f:else>
									<f:if condition="{fieldMakContent}=={TkyTrue}">
										<f:then>
											<p class="pResults">
												<g:strreplace search="@" replace="">
													<f:translate key="LLL:{settings.languageRootPath}locallang-facets-classificationpath.xml:facet.Systemstellen.{s:data.valueForKey(array:document.fields.d003_s0, key:0)}"/>
												</g:strreplace>
											</p>
										</f:then>
									</f:if>
								</f:else>
							</f:if>
						</f:else>
					</f:if>
				</g:strreplace>
				<f:if condition="{s:logic.or(conditions:'{0:document.i011_, 1:document.i011_sa, 2:document.i011_sb}')}">
					<p class="pResults">
					<span style="color:#999999;">
						<g:strreplace search="@" replace="">
							<f:if condition="{s:data.valueForKey(array:document.fields, key:'d039Bs9')}">
								<f:then>
									<f:translate key="LLL:{settings.languageRootPath}locallang-facets.xml:facet.Zeitschrift.{s:data.valueForKey(array:document.fields.d039Bs9, key:0)}"/>
									<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asj')}">
										&nbsp;({s:data.valueForKey(array:document.fields.d031Asj, key:0)}<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asd')}">, Bd.&nbsp;{s:data.valueForKey(array:document.fields.d031Asd, key:0)}</f:if><f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Ash')}">, S.&nbsp;{s:data.valueForKey(array:document.fields.d031Ash, key:0)}</f:if>)
									</f:if>
								</f:then>
								<f:else>
									<f:if condition="{0:document.i011_sb}">
										<f:then>
											<f:if condition="{g:ZssJahr(integer:document.i011_sa.0)}=={g:ZssJahr(integer:document.i011_sb.0)}">
												<f:then>
													({g:ZssJahr(integer:document.i011_sa.0)}<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asd')}">, Bd.&nbsp;{s:data.valueForKey(array:document.fields.d031Asd, key:0)}</f:if><f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Ash')}">, S.&nbsp;{s:data.valueForKey(array:document.fields.d031Ash, key:0)}</f:if>)
												</f:then>
												<f:else>
													({g:ZssJahr(integer:document.i011_sa.0)}-{g:ZssJahr(integer:document.i011_sb.0)}<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asd')}">, Bd.&nbsp;{s:data.valueForKey(array:document.fields.d031Asd, key:0)}</f:if><f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Ash')}">, S.&nbsp;{s:data.valueForKey(array:document.fields.d031Ash, key:0)}</f:if>)
												</f:else>
											</f:if>
										</f:then>
										<f:else>
											<f:if condition="{document.d011_sa}">
												({g:ZssJahr(integer:document.i011_sa.0)}<f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Asd')}">, Bd.&nbsp;{s:data.valueForKey(array:document.fields.d031Asd, key:0)}</f:if><f:if condition="{s:data.valueForKey(array:document.fields, key:'d031Ash')}">, S.&nbsp;{s:data.valueForKey(array:document.fields.d031Ash, key:0)}</f:if>)
											</f:if>
										</f:else>
									</f:if>
								</f:else>
							</f:if>
						</g:strreplace>
					</span>
					</p>
					<p class="pResults">
					<span style="color:#999999;">
						<f:if condition="{document.d009_sb}">
							<f:alias map="{
								projectLogo:'{g:projectLogoCondition(array:document.d009_sb, key:0)}',
								projectNameResultsList:'{g:ProjectNameResultsListCondition(array:document.d009_sb, key:0)}'
							}">
								<img src="{projectLogo}" title="Aufnahme durch {projectNameResultsList}" class="contains-projectLogo" />
							</f:alias>
						</f:if>
						<f:if condition="{document.pd009P01s0}">
							<f:then>
								<f:alias map="{
									linkConditionGeneral:'{g:linkConditionGeneral(array:document.pd009P01s0)}',
									artikelDigi:'artikelDigi',
									rezWerkDigi:'rezWerkDigi'
								}">
									<f:if condition="{linkConditionGeneral} == {artikelDigi}">
										<f:then>
											<span class="contains-digiImgLink icon-doc-text" title="enthält weiterführenden Link zum Artikel-Digitalisat"></span>
										</f:then>
										<f:else>
										</f:else>
									</f:if>
								</f:alias>
							</f:then>
							<f:else>
								<f:if condition="{document.pd009P01sy}">
									<f:then>
										<f:alias map="{
											linkConditionGeneral:'{g:linkConditionGeneral(array:document.pd009P01sy)}',
											artikelDigi:'artikelDigi',
											rezWerkDigi:'rezWerkDigi'
										}">
											<f:if condition="{linkConditionGeneral} == {artikelDigi}">
												<f:then>
													<span class="contains-digiImgLink icon-doc-text" alt="enthält weiterführenden Link zum Artikel-Digitalisat"></span>
												</f:then>
												<f:else>
												</f:else>
											</f:if>
										</f:alias>
									</f:then>
								</f:if>
							</f:else>
						</f:if>
					</span>
					</p>
				</f:if>
				<f:if condition="{fieldMakContent}=={ZsTrue}">
					<f:if condition="{document.d006X}">
						<f:then>
							<f:alias map="{
							adwNr:'{g:ZssAdwNr(array:document.fields.d006X)}'
					  	}">
								<f:alias map="{
								projekt:'{g:ZssAdwNrProjektResultsList(string:adwNr)}'
							}">
									<f:if condition="{projekt}">
										<f:then>
											<f:for each="{projekt}" as="valueProjekt" iteration="iteratorProjekt">
												<f:alias map="{
												projectLogo:'{g:projectLogoCondition(array:valueProjekt, key:0)}',
												projectNameResultsList:'{g:ProjectNameResultsListCondition(array:valueProjekt, key:0)}'
											}">
													<img src="{projectLogo}" title="Aufnahme durch {projectNameResultsList}" class="contains-projectLogo" />{f:if(condition:"{iteratorProjekt.isLast}==0", then:"<span style=\"margin-right:5px;\"></span>")}
												</f:alias>
											</f:for>
										</f:then>
									</f:if>
								</f:alias>
							</f:alias>
						</f:then>
					</f:if>
					<f:if condition="{s:logic.or(conditions:'{0:document.zp_Digitalisat, 1:document.zp_Digitalisat_Kommentar, 2:document.zp_Mitarbeiter, 3:document.zp_Mitarbeiter_Funktion, 4:document.zp_Publikationsgeschichte, 5:document.zp_Redaktionsstil, 6:document.zp_Informationen, 7:document.zp_Erscheinungsverlauf, 8:document.zp_Erscheinungszyklus, 9:document.zp_Umfang, 10:document.zp_VD17Nr, 11:document.zp_VD18Nr, 12:document.zp_KirchnerNr, 13:document.zp_Signatur, 14:document.zp_Literatur, 15:document.zp_Verfasser_ZP, 16:document.zp_Erstellungsdatum}')}">
						<f:then>
							<span class="contains-zssProfile icon-newspaper" title="enthält ausführlicheres Zeitschriftenprofil"></span>
						</f:then>
					</f:if>
				</f:if>
			</article>
		</li>
	</f:format.raw>

</f:alias>
