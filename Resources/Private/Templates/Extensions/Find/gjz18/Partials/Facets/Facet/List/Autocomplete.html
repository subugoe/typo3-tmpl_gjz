{namespace s=Subugoe\Find\ViewHelpers}
{namespace t3jquery=Tx_T3jquery_ViewHelpers}
{namespace g=Gjz18\TmplGjz\ViewHelpers}
<f:comment>
	Uses the facet items to create a popup menu with an autocomplete field
	(using jQuery.chosen) to let the user easily find a specific item in the
	facet and use it as a filter.
</f:comment>
<s:page.linkCSS file="EXT:find/Resources/Public/JavaScript/jquery.chosen/public/chosen.min.css"/>
<f:comment>
	<t3jquery:addJQueryAndScript jsfile="EXT:find/Resources/Public/JavaScript/jquery.chosen/public/chosen.jquery.min.js"/>
	<t3jquery:addJQueryAndScript jsfile="EXT:tmpl_gjz/Resources/Public/JavaScript/chosen.jquery.min.js"/>
</f:comment>
<g:strreplace search="@" replace="">
<f:alias map="{
	translateArguments:'{0:\"{f:translate(key:\'LLL:{settings.languageRootPath}locallang-facets.xml:facet.{facetInfo.id}\', default:facetInfo.id)}\"}',
	valuesValid:'{g:ValidFacetValues(arr:facetData.values)}'
}">
<f:debug>
	{valuesValid}
</f:debug>
	<form>
		<f:form.select
			options="{s:find.selectOptionsForFacet(
				values:valuesValid,
				leadingBlank:1,
				sortByName:1,
				sortPrefixSeparator:facetInfo.sortPrefixSeparator,
				localisationPrefix:'LLL:{settings.languageRootPath}locallang-facets.xml:facet.{facetInfo.id}.'
			)}"
			class="facetSearch"
			additionalAttributes="{data-placeholder:'{f:translate(key:\"Filter by %s\", arguments:translateArguments)}'}"/>
	</form>
</f:alias>
</g:strreplace>
